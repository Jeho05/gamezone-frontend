<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Vid√©os</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background: #1a1a1a;
            color: #fff;
        }
        h1 { color: #a855f7; text-align: center; }
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        .video-test {
            margin: 30px 0;
            padding: 20px;
            background: #2a2a2a;
            border-radius: 10px;
            border: 2px solid #a855f7;
        }
        .video-test h2 {
            color: #ec4899;
            margin-top: 0;
        }
        video {
            width: 100%;
            max-width: 800px;
            border: 3px solid #22c55e;
            border-radius: 10px;
            display: block;
            margin: 20px auto;
        }
        .status {
            text-align: center;
            padding: 10px;
            margin: 10px 0;
            border-radius: 5px;
            font-weight: bold;
        }
        .success { background: #22c55e; color: white; }
        .error { background: #ef4444; color: white; }
        .info { background: #3b82f6; color: white; }
        .controls {
            text-align: center;
            margin: 20px 0;
        }
        button {
            background: #a855f7;
            color: white;
            border: none;
            padding: 10px 20px;
            margin: 5px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
        }
        button:hover {
            background: #9333ea;
        }
        .info-box {
            background: #374151;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
        }
        .info-box p {
            margin: 5px 0;
        }
        code {
            background: #1f2937;
            padding: 2px 6px;
            border-radius: 3px;
            color: #22c55e;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üé¨ Test des Vid√©os</h1>

        <!-- Test 1: Cyber Arcade -->
        <div class="video-test">
            <h2>Test 1: Cyber Arcade Neon Ember</h2>
            <div class="info-box">
                <p><strong>Fichier:</strong> <code>Cyber_Arcade_Neon_Ember.mp4</code></p>
                <p><strong>Taille:</strong> 1.2 MB</p>
                <p><strong>Utilis√© dans:</strong> Page d'accueil</p>
            </div>
            <video id="video1" controls muted>
                <source src="/images/video/Cyber_Arcade_Neon_Ember.mp4" type="video/mp4">
                Votre navigateur ne supporte pas la balise vid√©o.
            </video>
            <div id="status1" class="status info">‚è≥ Chargement...</div>
            <div class="controls">
                <button onclick="playVideo('video1')">‚ñ∂Ô∏è Lecture</button>
                <button onclick="pauseVideo('video1')">‚è∏Ô∏è Pause</button>
                <button onclick="reloadVideo('video1')">üîÑ Recharger</button>
            </div>
        </div>

        <!-- Test 2: Arcade Welcome -->
        <div class="video-test">
            <h2>Test 2: Arcade Welcome Manager Loop</h2>
            <div class="info-box">
                <p><strong>Fichier:</strong> <code>Arcade_Welcome_Manager_Loop.mp4</code></p>
                <p><strong>Taille:</strong> 1.4 MB</p>
                <p><strong>Utilis√© dans:</strong> Page Login</p>
            </div>
            <video id="video2" controls muted>
                <source src="/images/video/Arcade_Welcome_Manager_Loop.mp4" type="video/mp4">
                Votre navigateur ne supporte pas la balise vid√©o.
            </video>
            <div id="status2" class="status info">‚è≥ Chargement...</div>
            <div class="controls">
                <button onclick="playVideo('video2')">‚ñ∂Ô∏è Lecture</button>
                <button onclick="pauseVideo('video2')">‚è∏Ô∏è Pause</button>
                <button onclick="reloadVideo('video2')">üîÑ Recharger</button>
            </div>
        </div>

        <!-- Test 3: Kling Animation -->
        <div class="video-test">
            <h2>Test 3: Kling Image to Video</h2>
            <div class="info-box">
                <p><strong>Fichier:</strong> <code>kling_20251010_Image_to_Video.mp4</code></p>
                <p><strong>Taille:</strong> 13.3 MB</p>
                <p><strong>Utilis√© dans:</strong> Page Register</p>
                <p><strong>‚ö†Ô∏è Note:</strong> Fichier lourd, peut prendre quelques secondes</p>
            </div>
            <video id="video3" controls muted>
                <source src="/images/video/kling_20251010_Image_to_Video_Use_the_up_4875_0.mp4" type="video/mp4">
                Votre navigateur ne supporte pas la balise vid√©o.
            </video>
            <div id="status3" class="status info">‚è≥ Chargement...</div>
            <div class="controls">
                <button onclick="playVideo('video3')">‚ñ∂Ô∏è Lecture</button>
                <button onclick="pauseVideo('video3')">‚è∏Ô∏è Pause</button>
                <button onclick="reloadVideo('video3')">üîÑ Recharger</button>
            </div>
        </div>

        <!-- Informations de d√©bogage -->
        <div class="video-test" style="border-color: #3b82f6;">
            <h2>üìä Informations de D√©bogage</h2>
            <div class="info-box">
                <p><strong>Console:</strong> Ouvrez F12 pour voir les logs d√©taill√©s</p>
                <p><strong>Network:</strong> V√©rifiez l'onglet Network (F12) pour voir le chargement</p>
                <p id="browser-info"></p>
            </div>
        </div>
    </div>

    <script>
        console.log('üé¨ Test des vid√©os');
        console.log('URL de base:', window.location.origin);

        // D√©tection du navigateur
        const browserInfo = document.getElementById('browser-info');
        browserInfo.innerHTML = `<strong>Navigateur:</strong> ${navigator.userAgent}`;

        // Fonction pour tester chaque vid√©o
        function setupVideoTest(videoId, statusId) {
            const video = document.getElementById(videoId);
            const status = document.getElementById(statusId);

            if (!video) {
                console.error(`‚ùå Vid√©o ${videoId} non trouv√©e`);
                return;
            }

            // Event: Vid√©o peut commencer √† √™tre lue
            video.addEventListener('loadeddata', () => {
                console.log(`‚úÖ ${videoId}: Donn√©es charg√©es`);
                status.className = 'status success';
                status.textContent = '‚úÖ Vid√©o charg√©e - Pr√™te √† lire';
            });

            // Event: M√©tadonn√©es charg√©es
            video.addEventListener('loadedmetadata', () => {
                console.log(`üìä ${videoId}: Dur√©e = ${video.duration}s, ${video.videoWidth}x${video.videoHeight}`);
            });

            // Event: Lecture en cours
            video.addEventListener('play', () => {
                console.log(`‚ñ∂Ô∏è ${videoId}: Lecture d√©marr√©e`);
            });

            // Event: Erreur
            video.addEventListener('error', (e) => {
                console.error(`‚ùå ${videoId}: Erreur de chargement`, e);
                console.error('D√©tails erreur:', video.error);
                status.className = 'status error';
                status.textContent = `‚ùå Erreur: ${getErrorMessage(video.error)}`;
            });

            // Event: En attente de donn√©es
            video.addEventListener('waiting', () => {
                console.log(`‚è≥ ${videoId}: En attente de donn√©es...`);
            });

            // Event: Donn√©es en cours de chargement
            video.addEventListener('progress', () => {
                const buffered = video.buffered;
                if (buffered.length > 0) {
                    const percent = (buffered.end(0) / video.duration) * 100;
                    console.log(`üì• ${videoId}: ${percent.toFixed(0)}% charg√©`);
                }
            });
        }

        // Messages d'erreur lisibles
        function getErrorMessage(error) {
            if (!error) return 'Erreur inconnue';
            switch(error.code) {
                case 1: return 'Chargement abandonn√©';
                case 2: return 'Erreur r√©seau';
                case 3: return 'Erreur de d√©codage';
                case 4: return 'Format non support√©';
                default: return `Erreur code ${error.code}`;
            }
        }

        // Fonctions de contr√¥le
        function playVideo(id) {
            const video = document.getElementById(id);
            video.play().catch(e => {
                console.error(`Erreur lecture ${id}:`, e);
                alert('Erreur lors de la lecture: ' + e.message);
            });
        }

        function pauseVideo(id) {
            const video = document.getElementById(id);
            video.pause();
        }

        function reloadVideo(id) {
            const video = document.getElementById(id);
            const status = document.getElementById(id.replace('video', 'status'));
            status.className = 'status info';
            status.textContent = 'üîÑ Rechargement...';
            video.load();
        }

        // Initialiser les tests
        setupVideoTest('video1', 'status1');
        setupVideoTest('video2', 'status2');
        setupVideoTest('video3', 'status3');

        // Test des URLs
        console.log('üîó URLs des vid√©os:');
        console.log('1. Cyber Arcade:', '/images/video/Cyber_Arcade_Neon_Ember.mp4');
        console.log('2. Arcade Loop:', '/images/video/Arcade_Welcome_Manager_Loop.mp4');
        console.log('3. Kling:', '/images/video/kling_20251010_Image_to_Video_Use_the_up_4875_0.mp4');

        // Tester l'accessibilit√© des fichiers
        setTimeout(() => {
            console.log('üìä √âtat des vid√©os apr√®s 2s:');
            ['video1', 'video2', 'video3'].forEach(id => {
                const video = document.getElementById(id);
                console.log(`${id}:`, {
                    readyState: video.readyState,
                    networkState: video.networkState,
                    error: video.error ? video.error.code : 'aucune'
                });
            });
        }, 2000);
    </script>
</body>
</html>
